openapi: 3.0.0
info:
  title: Alta API
  version: 1.0.0
paths:
  /api/group/getAll:
    $ref: "#/components/pathItems/get-all-group"
  /api/group/getDetail/:id:
    $ref: "#/components/pathItems/get-group-detail"
  /api/group/create:
    $ref: "#/components/pathItems/create-group"
  /api/group/update/:id:
    $ref: "#/components/pathItems/update-group"
  /api/group/delete/:id:
    $ref: "#/components/pathItems/delete-group"
  /api/preset/getAll:
    $ref: "#/components/pathItems/get-all-preset"
  /api/preset/getDetail/:id:
    $ref: "#/components/pathItems/get-preset-detail"
  /api/preset/create:
    $ref: "#/components/pathItems/create-preset"
  /api/preset/update/:id:
    $ref: "#/components/pathItems/update-preset"
  /api/preset/delete/:id:
    $ref: "#/components/pathItems/delete-preset"
  /api/source/getAll:
    $ref: "#/components/pathItems/get-all-source"
  /api/source/getDetail/:id:
    $ref: "#/components/pathItems/get-source-detail"
  /api/source/presigned:
    $ref: "#/components/pathItems/get-source-presigned-url"
  /api/source/upload:
    $ref: "#/components/pathItems/upload-source"
  /api/source/filter:
    $ref: "#/components/pathItems/filter-source"
  /api/source/create:
    $ref: "#/components/pathItems/create-source"
  /api/source/create/bulk:
    $ref: "#/components/pathItems/create-bulk-source"
  /api/source/search:
    $ref: "#/components/pathItems/search-source"
  /api/source/update/:id:
    $ref: "#/components/pathItems/update-source"
  /api/source/delete/:id:
    $ref: "#/components/pathItems/delete-source"
  /api/user/login:
    $ref: "#/components/pathItems/login"
  /api/user/me:
    $ref: "#/components/pathItems/me"
components:
  pathItems:
    get-all-group:
      summary: get all group
      get:
        tags:
          - group
        parameters:
          - in: query
            name: page
            schema:
              default: 1
              type: number
              minimum: 1
          - in: query
            name: size
            schema:
              default: 20
              type: number
              minimum: 1
              maximum: 20
        responses:
          "200":
            description: success
            headers:
              x-api-key:
                required: true
                schema:
                  type: string
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    success:
                      type: boolean
                      enum:
                        - true
                    data:
                      nullable: true
                      type: object
                      properties:
                        items:
                          type: array
                          items:
                            type: object
                            properties:
                              id:
                                type: number
                              colorCode:
                                type: string
                              name:
                                type: string
                              createdAt:
                                type: string
                            required:
                              - id
                              - colorCode
                              - name
                              - createdAt
                            additionalProperties: false
                        totalItems:
                          type: number
                        totalPages:
                          type: number
                        hasNextPage:
                          type: boolean
                        hasPrevPage:
                          type: boolean
                      required:
                        - items
                        - totalItems
                        - totalPages
                        - hasNextPage
                        - hasPrevPage
                      additionalProperties: false
                    message:
                      type: string
                    errors:
                      minItems: 0
                      maxItems: 0
                      type: array
                      items:
                        type: string
                  required:
                    - success
                    - data
                    - message
                    - errors
                  additionalProperties: false
    get-group-detail:
      summary: get group detail
      get:
        tags:
          - group
        parameters:
          - in: path
            name: id
            schema:
              type: number
            required: true
        responses:
          "200":
            description: success
            headers:
              x-api-key:
                required: true
                schema:
                  type: string
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    success:
                      type: boolean
                      enum:
                        - true
                    data:
                      nullable: true
                      type: object
                      properties:
                        id:
                          type: number
                        name:
                          type: string
                        colorCode:
                          type: string
                        createdAt:
                          type: string
                        updatedAt:
                          type: string
                      required:
                        - id
                        - name
                        - colorCode
                        - createdAt
                        - updatedAt
                      additionalProperties: false
                    message:
                      type: string
                    errors:
                      minItems: 0
                      maxItems: 0
                      type: array
                      items:
                        type: string
                  required:
                    - success
                    - data
                    - message
                    - errors
                  additionalProperties: false
          "404":
            description: not found
            headers:
              x-api-key:
                required: true
                schema:
                  type: string
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    success:
                      type: boolean
                      enum:
                        - false
                    data:
                      type: string
                      nullable: true
                      enum:
                        - null
                    message:
                      type: string
                    errors:
                      minItems: 0
                      maxItems: 0
                      type: array
                      items:
                        type: string
                  required:
                    - success
                    - data
                    - message
                    - errors
                  additionalProperties: false
    create-group:
      summary: create new group
      post:
        tags:
          - group
        requestBody:
          content:
            application/json:
              schema:
                type: object
                properties:
                  name:
                    type: string
                    minLength: 1
                  colorCode:
                    type: string
                    minLength: 1
                required:
                  - name
                  - colorCode
        responses:
          "201":
            description: success
            headers:
              x-api-key:
                required: true
                schema:
                  type: string
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    success:
                      type: boolean
                      enum:
                        - true
                    data:
                      nullable: true
                      type: object
                      properties:
                        id:
                          type: number
                        name:
                          type: string
                        colorCode:
                          type: string
                          pattern: ^#([A-Fa-f0-9]{3}|[A-Fa-f0-9]{6})$
                        createdAt:
                          type: string
                      required:
                        - id
                        - name
                        - colorCode
                        - createdAt
                      additionalProperties: false
                    message:
                      type: string
                    errors:
                      minItems: 0
                      maxItems: 0
                      type: array
                      items:
                        type: string
                  required:
                    - success
                    - data
                    - message
                    - errors
                  additionalProperties: false
          "400":
            description: validation failed
            headers:
              x-api-key:
                required: true
                schema:
                  type: string
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    success:
                      type: boolean
                      enum:
                        - false
                    data:
                      type: string
                      nullable: true
                      enum:
                        - null
                    message:
                      type: string
                    errors:
                      type: array
                      items:
                        type: string
                  required:
                    - success
                    - data
                    - message
                    - errors
                  additionalProperties: false
    update-group:
      summary: update group
      put:
        tags:
          - group
        parameters:
          - in: path
            name: id
            schema:
              type: number
            required: true
        requestBody:
          content:
            application/json:
              schema:
                type: object
                properties:
                  name:
                    type: string
                    minLength: 1
                  colorCode:
                    type: string
                    minLength: 1
        responses:
          "200":
            description: success
            headers:
              x-api-key:
                required: true
                schema:
                  type: string
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    success:
                      type: boolean
                      enum:
                        - true
                    data:
                      nullable: true
                      type: object
                      properties:
                        id:
                          type: number
                        name:
                          type: string
                        colorCode:
                          type: string
                        updatedAt:
                          type: string
                      required:
                        - id
                        - name
                        - colorCode
                        - updatedAt
                      additionalProperties: false
                    message:
                      type: string
                    errors:
                      minItems: 0
                      maxItems: 0
                      type: array
                      items:
                        type: string
                  required:
                    - success
                    - data
                    - message
                    - errors
                  additionalProperties: false
          "400":
            description: validation failed
            headers:
              x-api-key:
                required: true
                schema:
                  type: string
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    success:
                      type: boolean
                      enum:
                        - false
                    data:
                      type: string
                      nullable: true
                      enum:
                        - null
                    message:
                      type: string
                    errors:
                      type: array
                      items:
                        type: string
                  required:
                    - success
                    - data
                    - message
                    - errors
                  additionalProperties: false
          "404":
            description: not found
            headers:
              x-api-key:
                required: true
                schema:
                  type: string
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    success:
                      type: boolean
                      enum:
                        - false
                    data:
                      type: string
                      nullable: true
                      enum:
                        - null
                    message:
                      type: string
                    errors:
                      minItems: 0
                      maxItems: 0
                      type: array
                      items:
                        type: string
                  required:
                    - success
                    - data
                    - message
                    - errors
                  additionalProperties: false
    delete-group:
      summary: delete group
      delete:
        tags:
          - group
        parameters:
          - in: path
            name: id
            schema:
              type: number
            required: true
        responses:
          "200":
            description: success
            headers:
              x-api-key:
                required: true
                schema:
                  type: string
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    success:
                      type: boolean
                      enum:
                        - true
                    data:
                      nullable: true
                      type: object
                      properties:
                        id:
                          type: number
                      required:
                        - id
                      additionalProperties: false
                    message:
                      type: string
                    errors:
                      minItems: 0
                      maxItems: 0
                      type: array
                      items:
                        type: string
                  required:
                    - success
                    - data
                    - message
                    - errors
                  additionalProperties: false
          "404":
            description: not found
            headers:
              x-api-key:
                required: true
                schema:
                  type: string
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    success:
                      type: boolean
                      enum:
                        - false
                    data:
                      type: string
                      nullable: true
                      enum:
                        - null
                    message:
                      type: string
                    errors:
                      minItems: 0
                      maxItems: 0
                      type: array
                      items:
                        type: string
                  required:
                    - success
                    - data
                    - message
                    - errors
                  additionalProperties: false
    get-all-preset:
      summary: get all preset
      get:
        tags:
          - preset
        parameters:
          - in: query
            name: page
            schema:
              default: 1
              type: number
              minimum: 1
          - in: query
            name: size
            schema:
              default: 20
              type: number
              minimum: 1
              maximum: 20
        responses:
          "200":
            description: success
            headers:
              x-api-key:
                required: true
                schema:
                  type: string
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    success:
                      type: boolean
                      enum:
                        - true
                    data:
                      nullable: true
                      type: object
                      properties:
                        items:
                          type: array
                          items:
                            type: object
                            properties:
                              id:
                                type: number
                              name:
                                type: string
                              code:
                                type: string
                              createdAt:
                                type: string
                            required:
                              - id
                              - name
                              - code
                              - createdAt
                            additionalProperties: false
                        totalItems:
                          type: number
                        totalPages:
                          type: number
                        hasNextPage:
                          type: boolean
                        hasPrevPage:
                          type: boolean
                      required:
                        - items
                        - totalItems
                        - totalPages
                        - hasNextPage
                        - hasPrevPage
                      additionalProperties: false
                    message:
                      type: string
                    errors:
                      minItems: 0
                      maxItems: 0
                      type: array
                      items:
                        type: string
                  required:
                    - success
                    - data
                    - message
                    - errors
                  additionalProperties: false
    get-preset-detail:
      summary: get preset detail
      get:
        tags:
          - preset
        parameters:
          - in: path
            name: id
            schema:
              type: string
            required: true
        responses:
          "200":
            description: success
            headers:
              x-api-key:
                required: true
                schema:
                  type: string
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    success:
                      type: boolean
                      enum:
                        - true
                    data:
                      nullable: true
                      type: object
                      properties:
                        id:
                          type: number
                        code:
                          type: string
                        name:
                          type: string
                        chunkSplitSize:
                          type: number
                          minimum: 100
                          maximum: 2048
                        chunkSplitOverlap:
                          type: number
                          minimum: 10
                          maximum: 100
                        topK:
                          type: number
                          minimum: 1
                          maximum: 50
                        topN:
                          type: number
                          minimum: 1
                          maximum: 10
                        minSimilarityScore:
                          type: number
                          minimum: 0
                          maximum: 1
                        maxResponseTokens:
                          type: number
                          minimum: 512
                          maximum: 4096
                        rerankModel:
                          type: string
                        responsesModel:
                          type: string
                        createdAt:
                          type: string
                        updatedAt:
                          type: string
                      required:
                        - id
                        - code
                        - name
                        - chunkSplitSize
                        - chunkSplitOverlap
                        - topK
                        - topN
                        - minSimilarityScore
                        - maxResponseTokens
                        - rerankModel
                        - responsesModel
                        - createdAt
                        - updatedAt
                      additionalProperties: false
                    message:
                      type: string
                    errors:
                      minItems: 0
                      maxItems: 0
                      type: array
                      items:
                        type: string
                  required:
                    - success
                    - data
                    - message
                    - errors
                  additionalProperties: false
          "404":
            description: not found
            headers:
              x-api-key:
                required: true
                schema:
                  type: string
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    success:
                      type: boolean
                      enum:
                        - false
                    data:
                      type: string
                      nullable: true
                      enum:
                        - null
                    message:
                      type: string
                    errors:
                      minItems: 0
                      maxItems: 0
                      type: array
                      items:
                        type: string
                  required:
                    - success
                    - data
                    - message
                    - errors
                  additionalProperties: false
    create-preset:
      summary: create new preset
      post:
        tags:
          - preset
        requestBody:
          content:
            application/json:
              schema:
                type: object
                properties:
                  name:
                    type: string
                    minLength: 1
                  chunkSplitSize:
                    type: number
                    minimum: 100
                    maximum: 2048
                  chunkSplitOverlap:
                    type: number
                    minimum: 10
                    maximum: 100
                  topK:
                    type: number
                    minimum: 1
                    maximum: 50
                  topN:
                    type: number
                    minimum: 1
                    maximum: 10
                  minSimilarityScore:
                    type: number
                    minimum: 0
                    maximum: 1
                  maxResponseTokens:
                    type: number
                    minimum: 512
                    maximum: 4096
                  rerankModel:
                    type: string
                    minLength: 1
                  responsesModel:
                    type: string
                    minLength: 1
                required:
                  - name
                  - chunkSplitSize
                  - chunkSplitOverlap
                  - topK
                  - topN
                  - minSimilarityScore
                  - maxResponseTokens
                  - rerankModel
                  - responsesModel
        responses:
          "201":
            description: success
            headers:
              x-api-key:
                required: true
                schema:
                  type: string
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    success:
                      type: boolean
                      enum:
                        - true
                    data:
                      nullable: true
                      type: object
                      properties:
                        id:
                          type: number
                        code:
                          type: string
                        name:
                          type: string
                        chunkSplitSize:
                          type: number
                          minimum: 100
                          maximum: 2048
                        chunkSplitOverlap:
                          type: number
                          minimum: 10
                          maximum: 100
                        topK:
                          type: number
                          minimum: 1
                          maximum: 50
                        topN:
                          type: number
                          minimum: 1
                          maximum: 10
                        minSimilarityScore:
                          type: number
                          minimum: 0
                          maximum: 1
                        maxResponseTokens:
                          type: number
                          minimum: 512
                          maximum: 4096
                        rerankModel:
                          type: string
                        responsesModel:
                          type: string
                        createdAt:
                          type: string
                      required:
                        - id
                        - code
                        - name
                        - chunkSplitSize
                        - chunkSplitOverlap
                        - topK
                        - topN
                        - minSimilarityScore
                        - maxResponseTokens
                        - rerankModel
                        - responsesModel
                        - createdAt
                      additionalProperties: false
                    message:
                      type: string
                    errors:
                      minItems: 0
                      maxItems: 0
                      type: array
                      items:
                        type: string
                  required:
                    - success
                    - data
                    - message
                    - errors
                  additionalProperties: false
          "400":
            description: validation failed
            headers:
              x-api-key:
                required: true
                schema:
                  type: string
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    success:
                      type: boolean
                      enum:
                        - false
                    data:
                      type: string
                      nullable: true
                      enum:
                        - null
                    message:
                      type: string
                    errors:
                      type: array
                      items:
                        type: string
                  required:
                    - success
                    - data
                    - message
                    - errors
                  additionalProperties: false
    update-preset:
      summary: update preset
      put:
        tags:
          - preset
        parameters:
          - in: path
            name: id
            schema:
              type: number
            required: true
        requestBody:
          content:
            application/json:
              schema:
                type: object
                properties:
                  name:
                    type: string
                    minLength: 1
                  chunkSplitSize:
                    type: number
                    minimum: 100
                    maximum: 2048
                  chunkSplitOverlap:
                    type: number
                    minimum: 10
                    maximum: 100
                  topK:
                    type: number
                    minimum: 1
                    maximum: 50
                  topN:
                    type: number
                    minimum: 1
                    maximum: 10
                  minSimilarityScore:
                    type: number
                    minimum: 0
                    maximum: 1
                  maxResponseTokens:
                    type: number
                    minimum: 512
                    maximum: 4096
                  rerankModel:
                    type: string
                    minLength: 1
                  responsesModel:
                    type: string
                    minLength: 1
        responses:
          "200":
            description: success
            headers:
              x-api-key:
                required: true
                schema:
                  type: string
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    success:
                      type: boolean
                      enum:
                        - true
                    data:
                      nullable: true
                      type: object
                      properties:
                        id:
                          type: number
                        code:
                          type: string
                        name:
                          type: string
                        chunkSplitSize:
                          type: number
                          minimum: 100
                          maximum: 2048
                        chunkSplitOverlap:
                          type: number
                          minimum: 10
                          maximum: 100
                        topK:
                          type: number
                          minimum: 1
                          maximum: 50
                        topN:
                          type: number
                          minimum: 1
                          maximum: 10
                        minSimilarityScore:
                          type: number
                          minimum: 0
                          maximum: 1
                        maxResponseTokens:
                          type: number
                          minimum: 512
                          maximum: 4096
                        rerankModel:
                          type: string
                        responsesModel:
                          type: string
                        updatedAt:
                          type: string
                      required:
                        - id
                        - code
                        - name
                        - chunkSplitSize
                        - chunkSplitOverlap
                        - topK
                        - topN
                        - minSimilarityScore
                        - maxResponseTokens
                        - rerankModel
                        - responsesModel
                        - updatedAt
                      additionalProperties: false
                    message:
                      type: string
                    errors:
                      minItems: 0
                      maxItems: 0
                      type: array
                      items:
                        type: string
                  required:
                    - success
                    - data
                    - message
                    - errors
                  additionalProperties: false
          "400":
            description: validation failed
            headers:
              x-api-key:
                required: true
                schema:
                  type: string
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    success:
                      type: boolean
                      enum:
                        - false
                    data:
                      type: string
                      nullable: true
                      enum:
                        - null
                    message:
                      type: string
                    errors:
                      type: array
                      items:
                        type: string
                  required:
                    - success
                    - data
                    - message
                    - errors
                  additionalProperties: false
          "404":
            description: not found
            headers:
              x-api-key:
                required: true
                schema:
                  type: string
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    success:
                      type: boolean
                      enum:
                        - false
                    data:
                      type: string
                      nullable: true
                      enum:
                        - null
                    message:
                      type: string
                    errors:
                      minItems: 0
                      maxItems: 0
                      type: array
                      items:
                        type: string
                  required:
                    - success
                    - data
                    - message
                    - errors
                  additionalProperties: false
    delete-preset:
      summary: delete preset
      delete:
        tags:
          - preset
        parameters:
          - in: path
            name: id
            schema:
              type: number
            required: true
        responses:
          "200":
            description: success
            headers:
              x-api-key:
                required: true
                schema:
                  type: string
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    success:
                      type: boolean
                      enum:
                        - true
                    data:
                      nullable: true
                      type: object
                      properties:
                        id:
                          type: number
                      required:
                        - id
                      additionalProperties: false
                    message:
                      type: string
                    errors:
                      minItems: 0
                      maxItems: 0
                      type: array
                      items:
                        type: string
                  required:
                    - success
                    - data
                    - message
                    - errors
                  additionalProperties: false
          "404":
            description: not found
            headers:
              x-api-key:
                required: true
                schema:
                  type: string
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    success:
                      type: boolean
                      enum:
                        - false
                    data:
                      type: string
                      nullable: true
                      enum:
                        - null
                    message:
                      type: string
                    errors:
                      minItems: 0
                      maxItems: 0
                      type: array
                      items:
                        type: string
                  required:
                    - success
                    - data
                    - message
                    - errors
                  additionalProperties: false
    get-all-source:
      summary: get all source
      get:
        tags:
          - source
        parameters:
          - in: query
            name: page
            schema:
              default: 1
              type: number
              minimum: 1
          - in: query
            name: size
            schema:
              default: 20
              type: number
              minimum: 1
              maximum: 20
        responses:
          "200":
            description: success
            headers:
              x-api-key:
                required: true
                schema:
                  type: string
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    success:
                      type: boolean
                      enum:
                        - true
                    data:
                      nullable: true
                      type: object
                      properties:
                        items:
                          type: array
                          items:
                            type: object
                            properties:
                              id:
                                type: number
                              name:
                                type: string
                              fileUrl:
                                nullable: true
                                type: string
                              groupId:
                                nullable: true
                                type: number
                              groupName:
                                nullable: true
                                type: string
                              status:
                                type: string
                                enum:
                                  - PENDING
                                  - FAILED
                                  - DONE
                              createdAt:
                                type: string
                            required:
                              - id
                              - name
                              - fileUrl
                              - groupId
                              - groupName
                              - status
                              - createdAt
                            additionalProperties: false
                        totalItems:
                          type: number
                        totalPages:
                          type: number
                        hasNextPage:
                          type: boolean
                        hasPrevPage:
                          type: boolean
                      required:
                        - items
                        - totalItems
                        - totalPages
                        - hasNextPage
                        - hasPrevPage
                      additionalProperties: false
                    message:
                      type: string
                    errors:
                      minItems: 0
                      maxItems: 0
                      type: array
                      items:
                        type: string
                  required:
                    - success
                    - data
                    - message
                    - errors
                  additionalProperties: false
    get-source-detail:
      summary: get source detail
      get:
        tags:
          - source
        parameters:
          - in: path
            name: id
            schema:
              type: number
            required: true
        responses:
          "200":
            description: success
            headers:
              x-api-key:
                required: true
                schema:
                  type: string
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    success:
                      type: boolean
                      enum:
                        - true
                    data:
                      nullable: true
                      type: object
                      properties:
                        id:
                          type: number
                        name:
                          type: string
                        content:
                          type: string
                        fileUrl:
                          nullable: true
                          type: string
                        groupId:
                          nullable: true
                          type: number
                        groupName:
                          nullable: true
                          type: string
                        metadata: {}
                        status:
                          type: string
                          enum:
                            - PENDING
                            - FAILED
                            - DONE
                        statusReason:
                          nullable: true
                          type: string
                        createdAt:
                          type: string
                        updatedAt:
                          type: string
                      required:
                        - id
                        - name
                        - content
                        - fileUrl
                        - groupId
                        - groupName
                        - metadata
                        - status
                        - statusReason
                        - createdAt
                        - updatedAt
                      additionalProperties: false
                    message:
                      type: string
                    errors:
                      minItems: 0
                      maxItems: 0
                      type: array
                      items:
                        type: string
                  required:
                    - success
                    - data
                    - message
                    - errors
                  additionalProperties: false
          "404":
            description: not found
            headers:
              x-api-key:
                required: true
                schema:
                  type: string
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    success:
                      type: boolean
                      enum:
                        - false
                    data:
                      type: string
                      nullable: true
                      enum:
                        - null
                    message:
                      type: string
                    errors:
                      minItems: 0
                      maxItems: 0
                      type: array
                      items:
                        type: string
                  required:
                    - success
                    - data
                    - message
                    - errors
                  additionalProperties: false
    get-source-presigned-url:
      summary: get presigned url from S3 to upload file
      get:
        tags:
          - source
        responses:
          "200":
            description: success
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    success:
                      type: boolean
                      enum:
                        - true
                    data:
                      nullable: true
                      type: object
                      properties:
                        url:
                          type: string
                        objectKey:
                          type: string
                      required:
                        - url
                        - objectKey
                      additionalProperties: false
                    message:
                      type: string
                    errors:
                      minItems: 0
                      maxItems: 0
                      type: array
                      items:
                        type: string
                  required:
                    - success
                    - data
                    - message
                    - errors
                  additionalProperties: false
    upload-source:
      summary: upload source by referencing object key
      post:
        tags:
          - source
        responses:
          "200":
            description: success
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    success:
                      type: boolean
                      enum:
                        - true
                    data:
                      nullable: true
                      type: object
                      properties:
                        name:
                          type: string
                          minLength: 1
                        objectKey:
                          type: string
                        metadata:
                          type: object
                          additionalProperties:
                            anyOf:
                              - type: string
                              - type: number
                              - type: boolean
                              - type: array
                                items:
                                  type: string
                        groupId:
                          type: number
                      required:
                        - name
                        - objectKey
                      additionalProperties: false
                    message:
                      type: string
                    errors:
                      minItems: 0
                      maxItems: 0
                      type: array
                      items:
                        type: string
                  required:
                    - success
                    - data
                    - message
                    - errors
                  additionalProperties: false
          "400":
            description: error
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    success:
                      type: boolean
                      enum:
                        - false
                    data:
                      type: string
                      nullable: true
                      enum:
                        - null
                    message:
                      type: string
                    errors:
                      type: array
                      items:
                        type: string
                  required:
                    - success
                    - data
                    - message
                    - errors
                  additionalProperties: false
          "404":
            description: file not found
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    success:
                      type: boolean
                      enum:
                        - false
                    data:
                      type: string
                      nullable: true
                      enum:
                        - null
                    message:
                      type: string
                    errors:
                      minItems: 0
                      maxItems: 0
                      type: array
                      items:
                        type: string
                  required:
                    - success
                    - data
                    - message
                    - errors
                  additionalProperties: false
    filter-source:
      summary: filter source by metadata
      post:
        tags:
          - source
        parameters:
          - in: query
            name: groupId
            schema:
              type: number
        requestBody:
          content:
            application/json:
              schema:
                type: object
                additionalProperties:
                  type: object
                  properties:
                    $eq: {}
                    $ne: {}
                    $gt:
                      type: number
                    $gte:
                      type: number
                    $lt:
                      type: number
                    $lte:
                      type: number
                    $in:
                      type: array
                      items:
                        type: string
                    $nin:
                      type: array
                      items:
                        type: string
        responses:
          "200":
            description: success
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    success:
                      type: boolean
                      enum:
                        - true
                    data:
                      nullable: true
                      type: array
                      items:
                        type: object
                        properties:
                          id:
                            type: number
                          name:
                            type: string
                          fileUrl:
                            nullable: true
                            type: string
                          groupId:
                            nullable: true
                            type: number
                          groupName:
                            nullable: true
                            type: string
                          status:
                            type: string
                            enum:
                              - PENDING
                              - FAILED
                              - DONE
                          createdAt:
                            type: string
                        required:
                          - id
                          - name
                          - fileUrl
                          - groupId
                          - groupName
                          - status
                          - createdAt
                        additionalProperties: false
                    message:
                      type: string
                    errors:
                      minItems: 0
                      maxItems: 0
                      type: array
                      items:
                        type: string
                  required:
                    - success
                    - data
                    - message
                    - errors
                  additionalProperties: false
          "400":
            description: error
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    success:
                      type: boolean
                      enum:
                        - false
                    data:
                      type: string
                      nullable: true
                      enum:
                        - null
                    message:
                      type: string
                    errors:
                      type: array
                      items:
                        type: string
                  required:
                    - success
                    - data
                    - message
                    - errors
                  additionalProperties: false
    create-source:
      summary: create new source
      post:
        tags:
          - source
        parameters:
          - in: query
            name: preset
            schema:
              type: string
        requestBody:
          content:
            application/json:
              schema:
                type: object
                properties:
                  name:
                    type: string
                    minLength: 1
                  content:
                    type: string
                    minLength: 1
                  metadata:
                    type: object
                    additionalProperties:
                      anyOf:
                        - type: string
                        - type: number
                        - type: boolean
                        - type: array
                          items:
                            type: string
                  groupId:
                    type: number
                required:
                  - name
                  - content
        responses:
          "201":
            description: success
            headers:
              x-api-key:
                required: true
                schema:
                  type: string
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    success:
                      type: boolean
                      enum:
                        - true
                    data:
                      nullable: true
                      type: object
                      properties:
                        id:
                          type: number
                        name:
                          type: string
                        createdAt:
                          type: string
                      required:
                        - id
                        - name
                        - createdAt
                      additionalProperties: false
                    message:
                      type: string
                    errors:
                      minItems: 0
                      maxItems: 0
                      type: array
                      items:
                        type: string
                  required:
                    - success
                    - data
                    - message
                    - errors
                  additionalProperties: false
          "400":
            description: validation failed
            headers:
              x-api-key:
                required: true
                schema:
                  type: string
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    success:
                      type: boolean
                      enum:
                        - false
                    data:
                      type: string
                      nullable: true
                      enum:
                        - null
                    message:
                      type: string
                    errors:
                      type: array
                      items:
                        type: string
                  required:
                    - success
                    - data
                    - message
                    - errors
                  additionalProperties: false
    create-bulk-source:
      summary: create sources (bulk) in background
      post:
        tags:
          - source
        parameters:
          - in: query
            name: preset
            schema:
              type: string
        requestBody:
          content:
            application/json:
              schema:
                minItems: 1
                maxItems: 100
                type: array
                items:
                  type: object
                  properties:
                    name:
                      type: string
                      minLength: 1
                    content:
                      type: string
                      minLength: 1
                    metadata:
                      type: object
                      additionalProperties:
                        anyOf:
                          - type: string
                          - type: number
                          - type: boolean
                          - type: array
                            items:
                              type: string
                    groupId:
                      type: number
                  required:
                    - name
                    - content
        responses:
          "201":
            description: success
            headers:
              x-api-key:
                required: true
                schema:
                  type: string
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    success:
                      type: boolean
                      enum:
                        - true
                    data:
                      nullable: true
                      type: object
                      properties:
                        createdAt:
                          type: string
                      required:
                        - createdAt
                      additionalProperties: false
                    message:
                      type: string
                    errors:
                      minItems: 0
                      maxItems: 0
                      type: array
                      items:
                        type: string
                  required:
                    - success
                    - data
                    - message
                    - errors
                  additionalProperties: false
          "400":
            description: validation failed
            headers:
              x-api-key:
                required: true
                schema:
                  type: string
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    success:
                      type: boolean
                      enum:
                        - false
                    data:
                      type: string
                      nullable: true
                      enum:
                        - null
                    message:
                      type: string
                    errors:
                      type: array
                      items:
                        type: string
                  required:
                    - success
                    - data
                    - message
                    - errors
                  additionalProperties: false
    search-source:
      summary: search source
      post:
        tags:
          - source
        parameters:
          - in: query
            name: rerank
            schema:
              type: string
              enum:
                - "0"
                - "1"
          - in: query
            name: preset
            schema:
              type: string
          - in: query
            name: tone
            schema:
              type: string
              enum:
                - normal
                - concise
                - explanatory
                - formal
        requestBody:
          content:
            application/json:
              schema:
                type: object
                properties:
                  question:
                    type: string
                    minLength: 1
                  sourceIds:
                    minItems: 1
                    type: array
                    items:
                      type: number
                required:
                  - question
                  - sourceIds
        responses:
          "200":
            description: success
            headers:
              x-api-key:
                required: true
                schema:
                  type: string
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    success:
                      type: boolean
                      enum:
                        - true
                    data:
                      nullable: true
                      type: object
                      properties:
                        answer:
                          type: string
                        references:
                          type: array
                          items:
                            type: string
                      required:
                        - answer
                        - references
                      additionalProperties: false
                    message:
                      type: string
                    errors:
                      minItems: 0
                      maxItems: 0
                      type: array
                      items:
                        type: string
                  required:
                    - success
                    - data
                    - message
                    - errors
                  additionalProperties: false
    update-source:
      summary: update source
      put:
        tags:
          - source
        parameters:
          - in: path
            name: id
            schema:
              type: number
            required: true
        requestBody:
          content:
            application/json:
              schema:
                type: object
                properties:
                  name:
                    type: string
                    minLength: 1
                  groupId:
                    nullable: true
                    type: number
        responses:
          "200":
            description: success
            headers:
              x-api-key:
                required: true
                schema:
                  type: string
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    success:
                      type: boolean
                      enum:
                        - true
                    data:
                      nullable: true
                      type: object
                      properties:
                        id:
                          type: number
                        name:
                          type: string
                        updatedAt:
                          type: string
                      required:
                        - id
                        - name
                        - updatedAt
                      additionalProperties: false
                    message:
                      type: string
                    errors:
                      minItems: 0
                      maxItems: 0
                      type: array
                      items:
                        type: string
                  required:
                    - success
                    - data
                    - message
                    - errors
                  additionalProperties: false
          "400":
            description: validation failed
            headers:
              x-api-key:
                required: true
                schema:
                  type: string
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    success:
                      type: boolean
                      enum:
                        - false
                    data:
                      type: string
                      nullable: true
                      enum:
                        - null
                    message:
                      type: string
                    errors:
                      type: array
                      items:
                        type: string
                  required:
                    - success
                    - data
                    - message
                    - errors
                  additionalProperties: false
          "404":
            description: not found
            headers:
              x-api-key:
                required: true
                schema:
                  type: string
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    success:
                      type: boolean
                      enum:
                        - false
                    data:
                      type: string
                      nullable: true
                      enum:
                        - null
                    message:
                      type: string
                    errors:
                      minItems: 0
                      maxItems: 0
                      type: array
                      items:
                        type: string
                  required:
                    - success
                    - data
                    - message
                    - errors
                  additionalProperties: false
    delete-source:
      summary: delete source
      delete:
        tags:
          - source
        parameters:
          - in: path
            name: id
            schema:
              type: number
            required: true
        responses:
          "200":
            description: success
            headers:
              x-api-key:
                required: true
                schema:
                  type: string
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    success:
                      type: boolean
                      enum:
                        - true
                    data:
                      nullable: true
                      type: object
                      properties:
                        id:
                          type: number
                      required:
                        - id
                      additionalProperties: false
                    message:
                      type: string
                    errors:
                      minItems: 0
                      maxItems: 0
                      type: array
                      items:
                        type: string
                  required:
                    - success
                    - data
                    - message
                    - errors
                  additionalProperties: false
          "404":
            description: not found
            headers:
              x-api-key:
                required: true
                schema:
                  type: string
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    success:
                      type: boolean
                      enum:
                        - false
                    data:
                      type: string
                      nullable: true
                      enum:
                        - null
                    message:
                      type: string
                    errors:
                      minItems: 0
                      maxItems: 0
                      type: array
                      items:
                        type: string
                  required:
                    - success
                    - data
                    - message
                    - errors
                  additionalProperties: false
    login:
      summary: login
      post:
        tags:
          - user
        requestBody:
          content:
            application/json:
              schema:
                type: object
                properties:
                  email:
                    type: string
                    minLength: 1
                    format: email
                    pattern: ^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$
                  password:
                    type: string
                    minLength: 1
                required:
                  - email
                  - password
        responses:
          "200":
            description: success
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    success:
                      type: boolean
                      enum:
                        - true
                    data:
                      nullable: true
                      type: object
                      properties:
                        userId:
                          type: number
                        token:
                          type: string
                      required:
                        - userId
                        - token
                      additionalProperties: false
                    message:
                      type: string
                    errors:
                      minItems: 0
                      maxItems: 0
                      type: array
                      items:
                        type: string
                  required:
                    - success
                    - data
                    - message
                    - errors
                  additionalProperties: false
          "401":
            description: invalid credentials
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    success:
                      type: boolean
                      enum:
                        - false
                    data:
                      type: string
                      nullable: true
                      enum:
                        - null
                    message:
                      type: string
                    errors:
                      minItems: 0
                      maxItems: 0
                      type: array
                      items:
                        type: string
                  required:
                    - success
                    - data
                    - message
                    - errors
                  additionalProperties: false
    me:
      summary: get current logged in user
      get:
        tags:
          - user
        responses:
          "200":
            description: success
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    success:
                      type: boolean
                      enum:
                        - true
                    data:
                      nullable: true
                      type: object
                      properties:
                        id:
                          type: number
                        email:
                          type: string
                          format: email
                          pattern: ^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$
                        role:
                          type: string
                          enum:
                            - ADMIN
                      required:
                        - id
                        - email
                        - role
                      additionalProperties: false
                    message:
                      type: string
                    errors:
                      minItems: 0
                      maxItems: 0
                      type: array
                      items:
                        type: string
                  required:
                    - success
                    - data
                    - message
                    - errors
                  additionalProperties: false
  securitySchemes:
    bearerAuth:
      type: apiKey
      in: header
      name: x-api-key
      description: Alta api key
